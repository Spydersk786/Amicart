<%layout('layouts/boilerplate')%>
<script src="/javascripts/"></script>
<!-- value fills the input while name stores it to send it to db-->
<div class="row">
    <h1 class="text-center">Edit Product</h1>
    <div class="col-6 offset-3">
        <form action="/Products/<%=product._id%>?_method=PUT" method="POST" class="needs-validation"  novalidate enctype="multipart/form-data">
            <div class="mb-3">
                <label for="title" class="form-label">Title</label>
                <input class="form-control" type="text" name="product[title]" id="title" value="<%=product.title%>" required>
                <div class="valid-feedback">Looks good!</div>
            </div>
            <div class="mb-3">
                <label for="price" class="form-label">Price</label>
                <div class="input-group mb-3">
                    <span class="input-group-text">$</span>
                    <input type="text" class="form-control" name="product[price]" id="price" value="<%=product.price%>" required>
                    <div class="valid-feedback">Looks good!</div>
                </div>
            </div>
            <div class="mb-3 custom-file">
                <label class="form-label custom-file-label" for="image">Upload Images</label>
                <input class="form-control" type="file" id="image" name="image" multiple>
            </div>
            <div id="file-list" class="mt-2"></div>
            <div class="mb-3">
                <label for="category" class="form-label">Category</label>
                <input class="form-control" type="text" name="product[category]" id="category" value="<%=product.category%>" required>
                <div class="valid-feedback">Looks good!</div>
            </div>
            <div class="mb-3">
                <label for="description" class="form-label">Description</label>
                <textarea class="form-control" type="text" name="product[description]" id="description" required><%=product.description%></textarea>
                <div class="valid-feedback">Looks good!</div>
            </div>
            <div class="mb-3">
                <% for (let i = 0; i < product.images.length; i += 2) { %>
                    <div class="row mb-3">
                        <% for (let j = i; j < i + 2 && j < product.images.length; j++) { %>
                            <div class="col-md-6">
                                <img src="<%= product.images[j].thumbnail %>" class="img-thumbnail mb-2" alt="">
                                <div class="form-check">
                                    <input type="checkbox" id="image-<%= j %>" name="deleteImages[]" value="<%= product.images[j].filename %>" class="form-check-input">
                                    <label class="form-check-label" for="image-<%= j %>">Delete?</label>
                                </div>
                            </div>
                        <% } %>
                    </div>
                <% } %>
            </div>
            <div class="mb-3">
                <button class="btn btn-info">Update Campground</button>
            </div>
        </form>
        <div mb-3>
            <a href="/Products/<%=product._id%>" class="btn btn-primary mb-1">Back To Product</a>
        </div>
    </div>
</div>

